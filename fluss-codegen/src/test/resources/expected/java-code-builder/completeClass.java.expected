public final class RecordEqualiser implements Equaliser {
  private int fieldCount;
  private final Object[] references;

  public RecordEqualiser(Object[] references) throws Exception {
    this.references = references;
    this.fieldCount = 0;
  }

  @Override
  public boolean equals(Object left, Object right) {
    if (left == null && right == null) {
      return true;
    }
    if (left == null || right == null) {
      return false;
    }
    boolean result = true;
    for (int i = 0; i < fieldCount; i++) {
      result = result && compareField(i, left, right);
    }
    return result;
  }

  private boolean compareField(int idx, Object l, Object r) {
    return l.equals(r);
  }
}
